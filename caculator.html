<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  .calculatorTable {
    margin-top: 10px;
    margin-left: 10px;
  }

  ._btn- {
    width: 20px;
    height: 20px;
    padding: 0;
    line-height: 0;
    margin-left: 15px;
  }

  ._btn {
    width: 20px;
    height: 20px;
    padding: 0;
    line-height: 0;
  }

  .inputnumber {
    width: 55px;
  }

  th {
    font-size: 0.7em;
  }

  input[type=range] {
    margin: 10px 0;
  }

  table {
    table-layout: fixed;
  }
</style>

<body>
  <table class="calculatorTable">
    <tr>
      <th>種族值</th>
      <th><input type="range" id="racerangeInput" min="0" max="200" value="100">
        <input type="button" class="_btn-" value="-" id="race-">
        <input type="number" class="inputnumber" value="100" id="race">
        <input type="button" class="_btn" value="+" id="raceplus"></button>
      </th>
    </tr>
    <tr>
      <th>個體值</th>
      <th><input type="range" id="personalrangeInput" min="0" max="31" value="31">
        <input type="button" class="_btn-" value="-" id="personal-">
        <input type="number" class="inputnumber" value="31" id="personal">
        <input type="button" class="_btn" value="+" id="personalplus"></button>
      </th>
    </tr>
    <tr>
      <th>努力值</th>
      <th><input type="range" id="effortrangeInput" min="0" max="255" value="255">
        <input type="button" class="_btn-" value="-" id="effort-">
        <input type="number" class="inputnumber" value="255" id="effort">
        <input type="button" class="_btn" value="+" id="effortplus"></button>
      </th>
    </tr>
    <tr>
      <th>Level</th>
      <th><input type="range" id="levelrangeInput" min="0" max="100" value="50">
        <input type="button" class="_btn-" value="-" id="level-">
        <input type="number" class="inputnumber" value="50" id="level">
        <input type="button" class="_btn" value="+" id="levelplus"></button>
      </th>
    </tr>
    <tr>
      <th>HP結果</th>
      <th><input type="text" class="inputnumber" value="207.375" id="Result"></th>
    </tr>
    <tr>
      <th>性格</th>
      <th><select name="" id="character">
          <option value="1.1">1.1</option>
          <option value="1" selected>1</option>
          <option value="0.9">0.9</option>
        </select></th>
    </tr>
    <tr>
      <th>能力提升</th>
      <th><select name="" id="upplus">
          <option value="0.5" selected>0.5</option>
          <option value="0.66" selected>0.66</option>
          <option value="1" selected>1</option>
          <option value="1.3">古代活性</option>
          <option value="1.5">1.5</option>
          <option value="2">2</option>
          <option value="2.5">2.5</option>
          <option value="3">3</option>
          <option value="3.5">3.5</option>
          <option value="4">4</option>
        </select>
      </th>
    </tr>
    <tr>
      <th>其他結果</th>
      <th><input type="text" class="inputnumber" value="167.6125" id="otherResult"></th>
    </tr>
    <tr>
      <th>atk</th>
      <th><input type="range" id="atkrangeInput" min="0" max="1000" value="100">
        <input type="button" class="_btn-" value="-" id="atk-">
        <input type="number" class="inputnumber" value="100" id="atk">
        <input type="button" class="_btn" value="+" id="atkplus"></button>
      </th>
    </tr>
    <tr>
      <th>def</th>
      <th><input type="range" id="defrangeInput" min="0" max="1000" value="100">
        <input type="button" class="_btn-" value="-" id="def-">
        <input type="number" class="inputnumber" value="100" id="def">
        <input type="button" class="_btn" value="+" id="defplus"></button>
      </th>
    </tr>
    <tr>
      <th>威力</th>
      <th><input type="range" id="powerrangeInput" min="0" max="200" value="80">
        <input type="button" class="_btn-" value="-" id="power-">
        <input type="number" class="inputnumber" value="80" id="power">
        <input type="button" class="_btn" value="+" id="powerplus"></button>
      </th>
    </tr>
    <tr>
      <th>本系加成</th>
      <th><select name="" id="selfplus">
          <option value="1" selected>1</option>
          <option value="1.5">1.5</option>
          <option value="2">2</option>
        </select>
      </th>
    </tr>
    <tr>
      <th>屬性相剋</th>
      <th><select name="" id="attrplus">
          <option value="0.25">0.25</option>
          <option value="0.5">0.5</option>
          <option value="1" selected>1</option>
          <option value="2">2</option>
          <option value="4">4</option>
        </select></th>
    </tr>
    <tr>
      <th>天氣加成</th>
      <th><select name="" id="weatherplus">
          <option value="0.5">0.5</option>
          <option value="1" selected>1</option>
          <option value="1.5">1.5</option>
        </select></th>
    </tr>
    <tr>
      <th>道具</th>
      <th>
        <select name="" id="staffplus">
          <option value="1.5">講究系列</option>
          <option value="1" selected>無</option>
          <option value="1.3">生命寶珠</option>
          <option value="1.1">1.1</option>
          <option value="1.2">1.2</option>
        </select>
      </th>
    </tr>
    <tr>
      <th>特性</th>
      <th><select name="" id="characterplus">
          <option value="1" selected>無</option>
          <option value="1.3">強行</option>
        </select></th>
    </tr>
    <tr>
      <th>傷害計算</th>
      <th><input type="number" class="inputnumber" value="37.2" id="damage"></th>
    </tr>
  </table>
</body>
<script>
  //+- start
  $('#raceplus,#personalplus,#effortplus,#levelplus,#atkplus,#defplus,#powerplus').click(function () {
    var id = "#" + $(this).attr("id").replace('plus', '');
    var value = parseInt($(id).val()) + 1;
    $(id).val(value);
    $(id + "rangeInput").val(value);
    calculate();
  });
  $('#race-,#personal-,#effort-,#level-,#atk-,#def-,#power-').click(function () {
    var id = "#" + $(this).attr("id").replace('-', '');
    var value = parseInt($(id).val()) - 1;
    $(id).val(value);
    $(id + "rangeInput").val(value);
    calculate();
  });
  //+- end
  //拖拉同步改變text值
  $('#racerangeInput,#personalrangeInput,#effortrangeInput,#levelrangeInput,#atkrangeInput,#defrangeInput,#powerrangeInput').on('input', function () {
    var id = "#" + $(this).attr("id").replace('rangeInput', '');
    $(id).val($(this).val());
  });
  //text值同步改變拖拉長度
  $('#race,#personal,#effort,#level,#atk,#def,#power').on('input', function () {
    var rangeInputName = "#" + $(this).attr("id") + "rangeInput";
    $(rangeInputName).val($(this).val());
  });
  var calculate = function () {
    var race = parseInt($('#race').val());
    var personal = parseInt($('#personal').val());
    var effort = parseInt($('#effort').val());
    var level = parseInt($('#level').val());
    var charact = parseFloat($('#character').val());
    var res = (race * 2 + personal + effort / 4) * (level / 100) + level + 10;
    var upplus = parseFloat($('#upplus').val());
    var otherres = ((race * 2 + personal + effort / 4) * (level / 100) + 5) * charact * upplus;
    $('#Result').val(res.toString());
    $('#otherResult').val(otherres.toString());
    var atk = parseInt($('#atk').val());
    var def = parseInt($('#def').val());
    var power = parseInt($('#power').val());
    var selfplus = parseFloat($('#selfplus').val());
    var attrplus = parseFloat($('#attrplus').val());
    var weatherplus = parseFloat($('#weatherplus').val());
    var staffplus = parseFloat($('#staffplus').val());
    var characterplus = parseFloat($('#characterplus').val());
    var calculatedamage = ((2 * level + 10) / 250 * atk / def * power + 2) * selfplus * attrplus * weatherplus * staffplus * characterplus;
    $('#damage').val(calculatedamage.toString());
  }
  //改變值立刻計算結果
  $('#race,#personal,#effort,#level,#racerangeInput,#personalrangeInput,#effortrangeInput,#levelrangeInput,#atkrangeInput,#defrangeInput,#powerrangeInput,#atk,#def,#power').on('input', calculate);
  $('#character,#upplus,#selfplus,#attrplus,#weatherplus,#staffplus,#characterplus').on('change', calculate);
</script>

</html>