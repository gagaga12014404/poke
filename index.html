<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">


  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.bootstrap4.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap4.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.9/js/responsive.bootstrap4.min.js"></script>

</head>

<body>

  <div id="control">
    <button class="toggle-vis" data-column="4">生命</button>
    <button class="toggle-vis" data-column="5">物攻</button>
    <button class="toggle-vis" data-column="6">物防</button>
    <button class="toggle-vis" data-column="7">特攻</button>
    <button class="toggle-vis" data-column="8">特防</button>
    <button class="toggle-vis" data-column="9">速度</button>
  </div>
  <table id="all" class="table table-striped table-bordered dt-responsive nowrap" width="100%">
    <thead>
      <tr id="theadtr">
      </tr>
    </thead>
    <tfoot>
    </tfoot>
  </table>
</body>
<script>
  var column = ["編號", "名稱", "屬性1", "屬性2", "生命", "物攻", "物防", "特攻", "特防", "速度"]
  var th = "";
  for (var i in column) {
    th += "<th>" + column[i] + "</th>";
  }
  console.log(th);
  document.getElementById("theadtr").innerHTML += th;
  //document.getElementById("tfoottr").innerHTML += th;
  var columns = [
    { "data": "number" },
    { "data": "cName" },
    { "data": "attr1" },
    { "data": "attr2" },
    { "data": "hp" },
    { "data": "atk" },
    { "data": "def" },
    { "data": "satk" },
    { "data": "sdef" },
    { "data": "speed" },
  ];
  $(document).ready(function () {
    var table = $('#all').DataTable({
      "ajax": 'data.json',
      "columns": columns,
      "columnDefs": [
        { targets: [0], width: "5%", responsivePriority: 1},
        { targets: [1], width: "5%", responsivePriority: 2},
        { targets: [2], width: "7%", responsivePriority: 3},
        { targets: [3], width: "7%", responsivePriority: 3},
        { targets: [4], width: "3%", responsivePriority: 4},
        { targets: [5], width: "3%", responsivePriority: 4},
        { targets: [6], width: "3%", responsivePriority: 4},
        { targets: [7], width: "3%", responsivePriority: 4},
        { targets: [8], width: "3%", responsivePriority: 4},
        { targets: [9], width: "3%", responsivePriority: 4},
      ],
    });
    //動態新增刪除欄位
    $('button.toggle-vis').on('click', function (e) {
      e.preventDefault();

      // Get the column API object
      var column = table.column($(this).attr('data-column'));

      // Toggle the visibility
      column.visible(!column.visible());
    });
  });
</script>

</html>